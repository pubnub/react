{"version":3,"sources":["modules/release.js"],"names":["release","channel","_broadcast","isSubscribe","pnMessages","_component","state","pn_messages","setState","pnPresence","pn_presence","unsubscribe"],"mappings":";;;;;QAKgBA,O,GAAAA,O;AAAT,SAASA,OAAT,CAAiBC,OAAjB,EAA0B;AAC/B,MAAI,KAAKC,UAAL,CAAgBC,WAAhB,CAA4B,SAA5B,EAAuCF,OAAvC,CAAJ,EAAqD;AACnD,QAAIG,aAAa,KAAKC,UAAL,CAAgBC,KAAhB,CAAsBC,WAAvC;;AAEA,WAAOH,WAAWH,OAAX,CAAP;;AAEA,SAAKI,UAAL,CAAgBG,QAAhB,CAAyB,EAAED,aAAaH,UAAf,EAAzB;AACD;;AAED,MAAI,KAAKF,UAAL,CAAgBC,WAAhB,CAA4B,UAA5B,EAAwCF,OAAxC,CAAJ,EAAsD;AACpD,QAAIQ,aAAa,KAAKJ,UAAL,CAAgBC,KAAhB,CAAsBI,WAAvC;;AAEA,WAAOD,WAAWR,OAAX,CAAP;;AAEA,SAAKI,UAAL,CAAgBG,QAAhB,CAAyB,EAAEE,aAAaD,UAAf,EAAzB;AACD;;AAED,OAAKP,UAAL,CAAgBS,WAAhB,CAA4BV,OAA5B;AACD","file":"release.js","sourcesContent":["/**\n * Release the stack of messages for a channel or a set of channels\n *\n * @param {string|[string]} channel\n */\nexport function release(channel) {\n  if (this._broadcast.isSubscribe('message', channel)) {\n    let pnMessages = this._component.state.pn_messages;\n\n    delete pnMessages[channel];\n\n    this._component.setState({ pn_messages: pnMessages });\n  }\n\n  if (this._broadcast.isSubscribe('presence', channel)) {\n    let pnPresence = this._component.state.pn_presence;\n\n    delete pnPresence[channel];\n\n    this._component.setState({ pn_presence: pnPresence });\n  }\n\n  this._broadcast.unsubscribe(channel);\n}\n"]}